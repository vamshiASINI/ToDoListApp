<div class="title-bar">
    <div class="title">
        <h2>Student Details</h2>
    </div>
    <div class="add" *ngIf="!isAddMode && !isEditMode">
        <button mat-fab color="primary" matTooltip="Add New" (click) = "add()">
            <mat-icon>add</mat-icon>
        </button>
    </div>
</div>

<base-table *ngIf="!isAddMode && !isEditMode" [(tableSettings)]="student" [actionColumnAllowed]="true"
    [headingHide]="true">
</base-table>

<div class="container" *ngIf="isAddMode || isEditMode">
    <form #mainForm="ngForm">
        <mat-accordion class="example-headers-align">
            <form #basicForm="ngForm">
                <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
                    <mat-expansion-panel-header color="primary">
                        <mat-panel-title>
                            General Details
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">

                        <div fxFlex="0 1 calc(50% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Category</mat-label>
                                <mat-select name="category_id" [(ngModel)]="studentDetails.categories_id[0]">
                                    <mat-option value="">Select</mat-option>
                                    <mat-option *ngFor="let category of globalAPIResponse.category"
                                        [value]="category.id">
                                        {{category.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(50% - 25px)">
                            <mat-form-field appearance="standard" class="full-input" [(ngModel)]="studentDetails.course_or_grade_class_management_id">
                                <mat-label>Course/Class</mat-label>
                                <mat-select name="course">
                                    <mat-option value="">Select</mat-option>
                                    <mat-option *ngFor="let course of globalAPIResponse.course"
                                        [value]="course.id">
                                        {{course.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>


                        <!-- <div fxFlex="0 1 calc(50% - 25px)">
                            <mat-form-field appearance="standard" class="full-input" [(ngModel)]="studentDetails.type_of_course_global_id">
                                <mat-label>Type of course global</mat-label>
                                <mat-select name="course_type">
                                    <mat-option value="">Select</mat-option>
                                    <mat-option *ngFor="let course of globalAPIResponse.courseType"
                                        [value]="course.id">
                                        {{course.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div> -->

                        <div fxFlex="0 1 calc(50% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Admission Number</mat-label>
                                <input type="text" matInput name="Admission" autocomplete="new-password"
                                autocomplete="off" placeholder="Admission Number" 
                                [(ngModel)]="studentDetails.admission_number" required>
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(50% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Date of Admission</mat-label>
                                <input matInput [matDatepicker]="picker"
                                    name="date_of_admission" (click)="picker.open()" autocomplete="new-password"
                                    autocomplete="off" [(ngModel)]="studentDetails.date_of_admission">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(50% - 25px)">
                            <section class="example-section">
                                <mat-checkbox class="example-margin" name="is_active"
                                [(ngModel)]="studentDetails.is_active">Is Active
                                </mat-checkbox>
                            </section>
                        </div>

                    </div>

                    <mat-action-row>
                        <button mat-button color="primary" (click)="nextStep()">Next</button>
                    </mat-action-row>
                </mat-expansion-panel>
            </form>
                <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Contact & Personal Details
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form #contactForm="ngForm">
                    <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>First Name</mat-label>
                                <input type="text" matInput placeholder="First Name" autocomplete="new-password"
                                    autocomplete="off" name="first_name"  [(ngModel)]="contactData.first_name" required>
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Middle Name</mat-label>
                                <input type="text" matInput placeholder="Middle Name" autocomplete="new-password"
                                    autocomplete="off" name="middle_name" [(ngModel)]="contactData.middle_name">
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Last Name</mat-label>
                                <input type="text" matInput placeholder="Last Name" [(ngModel)]="contactData.last_name" autocomplete="new-password"
                                    autocomplete="off" name="last_name">
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>User Name</mat-label>
                                <input type="text" matInput placeholder="User Name" autocomplete="new-password"
                                    autocomplete="off" name="user_name" [(ngModel)]="contactData.username" required>
                            </mat-form-field>
                        </div>


                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Gender</mat-label>
                                <mat-select  name="gender_id" [(ngModel)]="contactData.gender_id">
                                    <mat-option value="">select</mat-option>
                                    <mat-option *ngFor="let gender of globalAPIResponse.gender" [value]="gender.id">
                                        {{gender.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Date of Birth</mat-label>
                                <input matInput [matDatepicker]="picker1" [(ngModel)]="contactData.date_of_birth"
                                    name="date_of_birth" (click)="picker1.open()" autocomplete="new-password"
                                    autocomplete="off">
                                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Email Address</mat-label>
                                <input type="email" matInput name="email" [(ngModel)]="contactData.email"
                                    placeholder="Email Address" autocomplete="new-password" autocomplete="off" required>
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Phone Dialing Code</mat-label>
                                <mat-select name="phone_dialing_code_id" [(ngModel)]="contactData.phone_dialing_code_id">
                                    <mat-option value="">select</mat-option>
                                    <mat-option *ngFor="let dialingCode of globalAPIResponse.countryCode"
                                        [value]="dialingCode.id">{{dialingCode.dialing_code}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Phone</mat-label>
                                <input type="number" matInput placeholder="Placeholder" type="number"
                                    autocomplete="new-password" autocomplete="off"
                                    name="phone" [(ngModel)]="contactData.phone">
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Emergency Phone Dialing Code</mat-label>
                                <mat-select  name="phone_dialing_code_id" [(ngModel)]="contactData.emergency_phone_dialing_code_id">
                                    <mat-option value="">select</mat-option>
                                    <mat-option *ngFor="let dialingCode of globalAPIResponse.countryCode"
                                        [value]="dialingCode.id">{{dialingCode.dialing_code}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Emergency Phone</mat-label>
                                <input type="number" matInput placeholder="Emergency Phone"
                                    autocomplete="new-password" autocomplete="off" name="emergency_phone"
                                    [(ngModel)]="contactData.emergency_phone">
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Blood Group</mat-label>
                                <mat-select  name="blood_group_id" [(ngModel)]="contactData.blood_group_id">
                                    <mat-option value="">select</mat-option>
                                    <mat-option *ngFor="let bloodGroup of globalAPIResponse.bloodGroup"
                                        [value]="bloodGroup.id">{{bloodGroup.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>


                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Religion</mat-label>
                                <mat-select name="religion_id" [(ngModel)]="contactData.religion_id">
                                    <mat-option value="">select</mat-option>
                                    <mat-option *ngFor="let religion of globalAPIResponse.religion"
                                        [value]="religion.id">{{religion.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Marital Status</mat-label>
                                <mat-select  name="marital_status_id" [(ngModel)]="contactData.marital_status_id">
                                    <mat-option value="">select</mat-option>
                                    <mat-option *ngFor="let marital of globalAPIResponse.maritalStatus"
                                        [value]="marital.id">{{marital.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Country</mat-label>
                                <mat-select name="country_id" [(ngModel)]="contactData.country_id">
                                    <mat-option value="">select</mat-option>
                                    <mat-option *ngFor="let country of globalAPIResponse.countryCode" [value]="country.id">
                                        {{country.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <!-- <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Qualification</mat-label>
                                <mat-select name="qualification_id" [(ngModel)]="contactData.qualification_id">
                                    <mat-option value="">select</mat-option>
                                    <mat-option *ngFor="let qualification of qualificationList"
                                        [value]="qualification.id">{{qualification.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div> -->
                        <!-- <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Total Experience</mat-label>
                                <input type="number" matInput placeholder="Total Experience" type="number"
                                    autocomplete="new-password" autocomplete="off" name="total_experience"
                                    [(ngModel)]="contactData.total_experience">
                            </mat-form-field>
                        </div> -->

                        <!-- <div fxFlex="0 1 calc(33.33% - 25px)">
                            <mat-form-field appearance="standard" class="full-input">
                                <mat-label>Experience Info</mat-label>
                                <textarea matInput placeholder="Experience Info" name="basicDetailsData"
                                [(ngModel)]="contactData.experience_info">
                                </textarea>
                            </mat-form-field>
                        </div> -->

                    </div>
                   

                    <mat-divider></mat-divider>
                    <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <section class="example-section">
                                <mat-checkbox class="example-margin" name="is_new_onbording"
                                [(ngModel)]="contactData.is_new_onbording">Is New Onboarding
                                </mat-checkbox>
                            </section>
                        </div>
                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <section class="example-section">
                                <mat-checkbox class="example-margin" name="is_billing_done"
                                [(ngModel)]="contactData.is_billing_done">Is Billing Done
                                </mat-checkbox>
                            </section>
                        </div>
                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <section class="example-section">
                                <mat-checkbox class="example-margin"
                                    name="is_active" [(ngModel)]="contactData.is_active">Is Active
                                </mat-checkbox>
                            </section>
                        </div>
                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <section class="example-section">
                                <mat-checkbox class="example-margin" [(ngModel)]="contactData.is_admin"
                                    name="is_admin">Is Admin
                                </mat-checkbox>
                            </section>
                        </div>
                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <section class="example-section">
                                <mat-checkbox class="example-margin" [(ngModel)]="contactData.is_app_user"
                                    name="is_app_user">Is App User
                                </mat-checkbox>
                            </section>
                        </div>
                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <section class="example-section">
                                <mat-checkbox class="example-margin" [(ngModel)]="contactData.is_invited"
                                    name="is_invited">Is Invited
                                </mat-checkbox>
                            </section>
                        </div>
                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <section class="example-section">
                                <mat-checkbox class="example-margin" [(ngModel)]="contactData.is_accept_terms"
                                    name="is_accept_terms">Is Accept Terms
                                </mat-checkbox>
                            </section>
                        </div>
                        <div fxFlex="0 1 calc(33.33% - 25px)">
                            <section class="example-section">
                                <mat-checkbox class="example-margin" [(ngModel)]="contactData.change_password"
                                    name="change_password">Change Password
                                </mat-checkbox>
                            </section>
                        </div>
                    </div>
                    </form>
                    <mat-action-row>
                        <button mat-button color="warn" (click)="prevStep()">Previous</button>
                        <button mat-button color="primary" (click)="nextStep()">Next</button>
                    </mat-action-row>
                </mat-expansion-panel>

                <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                         Address
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                  
                    <form #address="ngForm">
                        <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                         Present Address
                        </div>
                        <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                           
                            <div fxFlex="0 1 calc(50% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Present Address Line 1</mat-label>
                                    <input type="textarea" matInput placeholder="Present Address Line 1" type="text"
                                        autocomplete="new-password" autocomplete="off"
                                        name="address1"  [(ngModel)]="presentAddressData.address1" required>
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(50% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Present Address Line 2</mat-label>
                                    <input type="textarea" matInput placeholder="Present Address Line 2" type="text"
                                        autocomplete="new-password" autocomplete="off"
                                        name="address2" [(ngModel)]="presentAddressData.address2">
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(50% - 25px)">
                                <mat-form-field class="full-input margin-top">
                                    <mat-label>Country</mat-label>
                                    <input type="text" matInput [(ngModel)]="presentAddressData.country"
                                        (keyup)="search($event, 'country')" (focus)="onAutoCompleteChange('present_country')"
                                        [matAutocomplete]="present_country" name="country">
                                    <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                </mat-form-field>
                                <mat-autocomplete #present_country="matAutocomplete"
                                    (optionSelected)="onAutoCompleteChange('present_country', $event)">
                                    <mat-option disabled *ngIf="!isLoading && !globalAPIResponse.autoComplete.length">
                                        No Result Found</mat-option>
                                    <mat-option *ngFor="let option of globalAPIResponse.autoComplete" [value]="option.name"
                                        [id]="option.id">
                                        {{option.name}}
                                    </mat-option>
                                </mat-autocomplete>
                            </div>

                            <div fxFlex="0 1 calc(50% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>City</mat-label>
                                    <input type="text" matInput placeholder="City" type="text"
                                        autocomplete="new-password" autocomplete="off"
                                        name="city" required [(ngModel)]="presentAddressData.city">
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(50% - 25px)">
                                <mat-form-field class="full-input margin-top">
                                    <mat-label>State</mat-label>
                                    <input type="text" matInput [(ngModel)]="presentAddressData.state"
                                        (input)="search($event, 'state')" (focus)="onAutoCompleteChange('present_state')"
                                        [matAutocomplete]="auto" name="state" required>
                                    <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                </mat-form-field>
                                <mat-autocomplete #auto="matAutocomplete"
                                    (optionSelected)="onAutoCompleteChange('present_state', $event)">
                                    <mat-option disabled *ngIf="!isLoading && !globalAPIResponse.autoComplete.length">
                                        No Result Found</mat-option>
                                    <mat-option disabled *ngIf="!presentAddressData.country_id">Please select country first
                                    </mat-option>
                                    <mat-option *ngFor="let option of globalAPIResponse.autoComplete" [value]="option.name"
                                        [id]="option.id">
                                        {{option.name}}
                                    </mat-option>
                                </mat-autocomplete>
                            </div>

                            <div fxFlex="0 1 calc(50% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Pin Code</mat-label>
                                    <input type="text" matInput placeholder="Pin Code" type="text"
                                        autocomplete="new-password" autocomplete="off"
                                        name="pincode" [(ngModel)]="presentAddressData.pincode" required>
                                </mat-form-field>
                            </div>

                            <!-- <div fxFlex="0 1 calc(50% - 25px)">
                                <mat-label>Is Active</mat-label>
                                <mat-radio-group  name="is_active" [(ngModel)]="presentAddressData.is_active">
                                    <mat-radio-button style="padding: 10px;" [value]="true">Yes</mat-radio-button>
                                    <mat-radio-button [value]="false">No</mat-radio-button>
                                </mat-radio-group>
                            </div> -->
                        </div>
                        <mat-divider></mat-divider>

                        <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                            Permanent Address
                           </div>
                           <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                              
                               <div fxFlex="0 1 calc(50% - 25px)">
                                   <mat-form-field appearance="standard" class="full-input">
                                       <mat-label>Permanent Address Line 1</mat-label>
                                       <input type="textarea" matInput placeholder="Permanent Address Line 1" type="text"
                                           autocomplete="new-password" autocomplete="off"
                                           name="p_address1" [(ngModel)]="permanentAddressData.address1" required>
                                   </mat-form-field>
                               </div>
   
                               <div fxFlex="0 1 calc(50% - 25px)">
                                   <mat-form-field appearance="standard" class="full-input">
                                       <mat-label>Permanent Address Line 2</mat-label>
                                       <input type="textarea" matInput placeholder="Permanent Address Line 2" type="text"
                                           autocomplete="new-password" autocomplete="off"
                                           name="p_address2" [(ngModel)]="permanentAddressData.address2">
                                   </mat-form-field>
                               </div>
   
                               <div fxFlex="0 1 calc(50% - 25px)">
                                   <mat-form-field class="full-input margin-top">
                                       <mat-label>Country</mat-label>
                                       <input type="text" matInput [(ngModel)]="permanentAddressData.country"
                                           (keyup)="search($event, 'country')" (focus)="onAutoCompleteChange('permanent_country')"
                                           [matAutocomplete]="permanent_country" name="p_country">
                                       <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                   </mat-form-field>
                                   <mat-autocomplete #permanent_country="matAutocomplete"
                                       (optionSelected)="onAutoCompleteChange('permanent_country', $event)">
                                       <mat-option disabled *ngIf="!isLoading && !globalAPIResponse.autoComplete.length">
                                           No Result Found</mat-option>
                                       <mat-option *ngFor="let option of globalAPIResponse.autoComplete" [value]="option.name"
                                           [id]="option.id">
                                           {{option.name}}
                                       </mat-option>
                                   </mat-autocomplete>
                               </div>
   
                               <div fxFlex="0 1 calc(50% - 25px)">
                                   <mat-form-field appearance="standard" class="full-input">
                                       <mat-label>City</mat-label>
                                       <input type="text" matInput placeholder="City" type="text"
                                           autocomplete="new-password" autocomplete="off"
                                           name="p_city" [(ngModel)]="permanentAddressData.city" required>
                                   </mat-form-field>
                               </div>
   
                               <div fxFlex="0 1 calc(50% - 25px)">
                                   <mat-form-field class="full-input margin-top">
                                       <mat-label>State</mat-label>
                                       <input type="text" matInput [(ngModel)]="permanentAddressData.state"
                                           (input)="search($event, 'state')" (focus)="onAutoCompleteChange('permanent_state')"
                                           [matAutocomplete]="permanent_state" name="p_state" required>
                                       <mat-icon matSuffix>keyboard_arrow_down</mat-icon>
                                   </mat-form-field>
                                   <mat-autocomplete #permanent_state="matAutocomplete"
                                       (optionSelected)="onAutoCompleteChange('permanent_state', $event)">
                                       <mat-option disabled *ngIf="!isLoading && !globalAPIResponse.autoComplete.length">
                                           No Result Found</mat-option>
                                       <mat-option disabled *ngIf="!permanentAddressData.country_id">Please select country first
                                       </mat-option>
                                       <mat-option *ngFor="let option of globalAPIResponse.autoComplete" [value]="option.name"
                                           [id]="option.id">
                                           {{option.name}}
                                       </mat-option>
                                   </mat-autocomplete>
                               </div>
   
                               <div fxFlex="0 1 calc(50% - 25px)">
                                   <mat-form-field appearance="standard" class="full-input">
                                       <mat-label>Pin Code</mat-label>
                                       <input type="text" matInput placeholder="Pin Code" type="text"
                                           autocomplete="new-password" autocomplete="off"
                                           name="p_pincode" [(ngModel)]="permanentAddressData.pincode" required>
                                   </mat-form-field>
                               </div>
   
                               <!-- <div fxFlex="0 1 calc(50% - 25px)">
                                   <mat-label>Is Active</mat-label>
                                   <mat-radio-group  name="p_is_active" [(ngModel)]="permanentAddressData.is_active">
                                       <mat-radio-button style="padding: 10px;" [value]="true">Yes</mat-radio-button>
                                       <mat-radio-button [value]="false">No</mat-radio-button>
                                   </mat-radio-group>
                               </div> -->
                           </div>
                    </form>
                    <mat-action-row>
                        <button mat-button color="warn" (click)="prevStep()">Previous</button>
                        <button mat-button color="primary" (click)="nextStep()">Next</button>
                    </mat-action-row>
                </mat-expansion-panel>

                <mat-expansion-panel [expanded]="step === 3" (opened)="setStep(3)" hideToggle>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                         Details
                        </mat-panel-title>
                    </mat-expansion-panel-header>

                    <form #fatherDetails="ngForm">
                        <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                            Father Details
                           </div>
                        <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>First Name</mat-label>
                                    <input type="text" matInput placeholder="First Name" autocomplete="new-password"
                                        autocomplete="off" name="f_first_name" [(ngModel)]="fatherData.first_name" required>
                                </mat-form-field>
                            </div>
    
                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Middle Name</mat-label>
                                    <input type="text" matInput placeholder="Middle Name" autocomplete="new-password"
                                        autocomplete="off" name="f_middle_name" [(ngModel)]="fatherData.middle_name">
                                </mat-form-field>
                            </div>
    
                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Last Name</mat-label>
                                    <input type="text" matInput placeholder="Last Name" autocomplete="new-password"
                                        autocomplete="off" name="f_last_name" [(ngModel)]="fatherData.last_name">
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Email</mat-label>
                                    <input type="text" matInput placeholder="Email" autocomplete="new-password"
                                        autocomplete="off" name="f_email" [(ngModel)]="fatherData.email" required>
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Phone Dialing Code</mat-label>
                                    <mat-select name="f_phone_dialing_code_id" [(ngModel)]="fatherData.phone_dialing_code_id">
                                        <mat-option value="">select</mat-option>
                                        <mat-option *ngFor="let dialingCode of globalAPIResponse.countryCode"
                                            [value]="dialingCode.id">{{dialingCode.dialing_code}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Phone</mat-label>
                                    <input type="number" matInput placeholder="Phone" type="number" [(ngModel)]="fatherData.phone"
                                        autocomplete="new-password" autocomplete="off" name="f_phone">
                                </mat-form-field>
                            </div>

                            <!-- <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Country</mat-label>
                                    <mat-select name="f_country_id" [(ngModel)]="fatherData.country_id">
                                        <mat-option value="">select</mat-option>
                                        <mat-option *ngFor="let country of globalAPIResponse.countryCode" [value]="country.id">
                                            {{country.name}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div> -->
    
                        </div>
                    </form>
                    <!-- <mat-action-row>
                        <button mat-button color="warn" (click)="prevStep()">Previous</button>
                        <button mat-button color="primary" (click)="nextStep()">Next</button>
                    </mat-action-row> -->
                <!-- </mat-expansion-panel> -->
                        <mat-divider></mat-divider>
                <!-- <mat-expansion-panel [expanded]="step === 4" (opened)="setStep(4)" hideToggle> -->
                    <!-- <mat-expansion-panel-header>
                        <mat-panel-title>
                         Mother Details
                        </mat-panel-title>
                    </mat-expansion-panel-header> -->

                    <form #motherDetails="ngForm">
                        <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                            Mother Details
                           </div>
                        <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>First Name</mat-label>
                                    <input type="text" matInput placeholder="First Name" autocomplete="new-password"
                                        autocomplete="off" name="m_first_name" [(ngModel)]="motherData.first_name" required>
                                </mat-form-field>
                            </div>
    
                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Middle Name</mat-label>
                                    <input type="text" matInput placeholder="Middle Name" autocomplete="new-password"
                                        autocomplete="off" name="m_middle_name" [(ngModel)]="motherData.middle_name">
                                </mat-form-field>
                            </div>
    
                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Last Name</mat-label>
                                    <input type="text" matInput placeholder="Last Name" autocomplete="new-password"
                                        autocomplete="off" name="m_last_name" [(ngModel)]="motherData.last_name">
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Email</mat-label>
                                    <input type="text" matInput placeholder="Email" autocomplete="new-password"
                                        autocomplete="off" name="m_email" [(ngModel)]="motherData.email" required>
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Phone Dialing Code</mat-label>
                                    <mat-select name="m_phone_dialing_code_id" [(ngModel)]="motherData.phone_dialing_code_id">
                                        <mat-option value="">select</mat-option>
                                        <mat-option *ngFor="let dialingCode of globalAPIResponse.countryCode"
                                            [value]="dialingCode.id">{{dialingCode.dialing_code}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Phone</mat-label>
                                    <input type="number" matInput placeholder="Phone" type="number" [(ngModel)]="motherData.phone"
                                        autocomplete="new-password" autocomplete="off" name="m_phone">
                                </mat-form-field>
                            </div>

                            <!-- <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Country</mat-label>
                                    <mat-select name="m_country_id" [(ngModel)]="motherData.country_id">
                                        <mat-option value="">select</mat-option>
                                        <mat-option *ngFor="let country of globalAPIResponse.countryCode" [value]="country.id">
                                            {{country.name}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div> -->
    
                        </div>
                    </form>
                    <!-- <mat-action-row>
                        <button mat-button color="warn" (click)="prevStep()">Previous</button>
                        <button mat-button color="primary" (click)="nextStep()">Next</button>
                    </mat-action-row> -->
                <!-- </mat-expansion-panel> -->
                        <mat-divider></mat-divider>
                <!-- <mat-expansion-panel [expanded]="step === 5" (opened)="setStep(5)" hideToggle> -->
                    <!-- <mat-expansion-panel-header>
                        <mat-panel-title>
                         Guardian Details
                        </mat-panel-title>
                    </mat-expansion-panel-header> -->

                    <form #guardianDetails="ngForm">
                        <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                            Guardian Details
                           </div>
                        <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                            <div fxFlex="0 1 calc(33.33% - 25px)" style ="margin-top: 25px;">
                                <section class="example-section">
                                    <mat-checkbox class="example-margin" name="is_guardian"
                                    [(ngModel)]="studentDetails.is_active">Is Guardian</mat-checkbox>
                                </section>
                            </div>
                
                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>First Name</mat-label>
                                    <input type="text" matInput placeholder="First Name" autocomplete="new-password"
                                        autocomplete="off" name="g_first_name" [(ngModel)]="guardianData.first_name">
                                </mat-form-field>
                            </div>
    
                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Middle Name</mat-label>
                                    <input type="text" matInput placeholder="Middle Name" autocomplete="new-password"
                                        autocomplete="off" name="g_middle_name" [(ngModel)]="guardianData.middle_name">
                                </mat-form-field>
                            </div>
    
                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Last Name</mat-label>
                                    <input type="text" matInput placeholder="Last Name" autocomplete="new-password"
                                        autocomplete="off" name="g_last_name" [(ngModel)]="guardianData.last_name">
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Email</mat-label>
                                    <input type="text" matInput placeholder="Email" autocomplete="new-password"
                                        autocomplete="off" name="g_email" [(ngModel)]="guardianData.email">
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Phone Dialing Code</mat-label>
                                    <mat-select name="g_phone_dialing_code_id" [(ngModel)]="guardianData.phone_dialing_code_id">
                                        <mat-option value="">select</mat-option>
                                        <mat-option *ngFor="let dialingCode of globalAPIResponse.countryCode"
                                            [value]="dialingCode.id">{{dialingCode.dialing_code}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Phone</mat-label>
                                    <input type="number" matInput placeholder="Phone" type="number" [(ngModel)]="guardianData.phone"
                                        autocomplete="new-password" autocomplete="off" name="g_phone">
                                </mat-form-field>
                            </div>

                            <!-- <div fxFlex="0 1 calc(33.33% - 25px)">
                                <mat-form-field appearance="standard" class="full-input">
                                    <mat-label>Country</mat-label>
                                    <mat-select name="g_country_id" [(ngModel)]="guardianData.country_id">
                                        <mat-option value="">select</mat-option>
                                        <mat-option *ngFor="let country of globalAPIResponse.countryCode" [value]="country.id">
                                            {{country.name}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div> -->
    
                        </div>
                    </form>
                    <mat-action-row>
                        <button mat-button color="warn" (click)="prevStep()">Previous</button>
                        <button mat-button color="primary" (click)="nextStep()">Next</button>
                    </mat-action-row>
                </mat-expansion-panel>
                <mat-expansion-panel [expanded]="step === 4" (opened)="setStep(4)" hideToggle>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Additional Details
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form #customForm="ngForm">
                        <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                            <div [fxFlex]="customFieldsFlex" *ngFor="let field of customsFields">
                                <ng-container [ngSwitch]="field.input_type">
                                    <ng-container *ngSwitchCase="'SELECT'">
                                        <mat-form-field class="full-input margin-top">
                                            <mat-label>{{field.name | camelize}}</mat-label>
                                            <mat-select [(ngModel)]="customformData[field.name]" [name]="field.name"
                                                [required]="field.is_mandatory">
                                                <mat-option value="">Select</mat-option>
                                                <mat-option *ngFor="let data of field.dataSource" [value]="data.value">
                                                    {{data.name}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </ng-container>
                                    <ng-container *ngSwitchCase="'CHECKBOX'" class="full-input margin-top">
                                        <label style="margin-right: 20px;">{{field.name | camelize}}</label>
                                        <mat-radio-group [(ngModel)]="customformData[field.name]" [name]="field.name"
                                            [required]="field.is_mandatory">
                                            <mat-radio-button style="padding: 10px;" [value]="true">Yes</mat-radio-button>
                                            <mat-radio-button [value]="false">No</mat-radio-button>
                                        </mat-radio-group>
                                    </ng-container>
                                    <ng-container *ngSwitchDefault>
                                        <mat-form-field appearance="standard" class="full-input">
                                            <mat-label>{{field.name | camelize}}</mat-label>
                                            <input [type]="field.input_type" matInput [placeholder]="field.name | camelize"
                                                autocomplete="new-password" autocomplete="off"
                                                [(ngModel)]="customformData[field.name]" [name]="field.name"
                                                [required]="field.is_mandatory">
                                        </mat-form-field>
                                    </ng-container>
                                </ng-container>
                            </div>
                        </div>
                    </form>
                    <mat-action-row>
                        <button mat-button color="warn" (click)="prevStep()">Previous</button>
                        <button mat-button color="primary" (click)="nextStep()">Next</button>
                    </mat-action-row>
                </mat-expansion-panel>
                <mat-expansion-panel [expanded]="step === 5" (opened)="setStep(5)" hideToggle>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Documents
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form #customForm="ngForm">
                        <div fxLayout="row wrap" fxLayoutGap="25px" fxLayoutAlign="flex-start" style="padding: 20px 0px;">
                            <div [fxFlex]="docFieldsFlex" *ngFor="let docField of docFields">
                                <lable style="margin-right: 15px;">{{docField.file_name}}:</lable>
                                <button mat-mini-fab color="primary" (click)="fileInput.click()">
                                    <mat-icon>attach_file</mat-icon>
                                </button>
                                <input hidden (change)="onFileSelected()" #fileInput type="file" [id]="docField.id"
                                    accept=".{{docField.type_file | lowercase}}">
                            </div>
                        </div>
                    </form>
                    <mat-action-row>
                        <button mat-button color="warn" (click)="prevStep()">Previous</button>
                        <button mat-button color="primary" (click)="nextStep()">End</button>
                    </mat-action-row>
                </mat-expansion-panel>
             
        </mat-accordion>

        <div class="bottom-panel" [ngStyle]="{'background-color': bottomPanelBGCColor}">
            <button style="float: right; margin-right: 20px;
            margin-top: 10px;" mat-raised-button color="warn" (click)="cancel()">Cancel</button>
            <button style="float: right; margin-right: 20px;
            margin-top: 10px;" mat-raised-button color="primary" *ngIf="!isEditMode"
                [disabled]="!basicForm.valid || !contactForm.valid || !address.valid || !fatherDetails.valid || 
                !motherDetails.valid || mainForm.dirty"  
                (click)="submit()">Submit</button>
            <button style="float: right; margin-right: 20px;
            margin-top: 10px;" mat-raised-button color="primary" *ngIf="!isAddMode"
                [disabled]="!basicForm.valid || !contactForm.valid || !address.valid || !fatherDetails.valid || 
                !motherDetails.valid || mainForm.dirty"
                (click)="update()">Update</button>
        </div>
    </form>
</div>